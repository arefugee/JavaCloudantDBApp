package example.nosql;


import org.springframework.context.annotation.Scope;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
@Scope(value = "singleton")
public class MapServlet {
    
	@RequestMapping(value="/realtime", method = RequestMethod.GET)
	public String getRealtime(@RequestParam(value = "id", required = false)  Long id, @RequestParam(value = "cmd", required = false) String cmd ) throws Exception {
		
		String result = "";
		if (System.currentTimeMillis()%2==0){
			
			result = "{\"total_rows\":36,\"bookmark\":\"g1AAAAIzeJzLYWBg4MhgTmFQSklKzi9KdUhJMtRLT81PSc3NNzAw1EvOyS9NScwr0ctLLckBqmVKZEiS____f1YGk5v9BwYwSGRBNcAYrwFJCkAyyR7dDCZUM4zwm-EAMiOegDvweyQpAWRGPUVm5LGA9DQAKaAx81HMYSbdnAUQc_bjcw_-cIGYcwBizn1K3fMAYg5q-DBnAQA3tanV\",\"rows\":[{\"id\":\"2eaa3e6e396869b589242ce4e6f2b613\",\"order\":[1.0,0],\"fields\":{\"long\":116.25424159999998,\"lat\":39.9178331,\"time\":1413912034.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2b613\",\"_rev\":\"1-586c701f9357948fce83ea00c027ae7c\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912034.0,\"creation_date\":\"Wed Oct 22 01:20:34 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2d301\",\"order\":[1.0,0],\"fields\":{\"long\":116.27424159999998,\"lat\":39.9028331,\"time\":1413912058.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2d301\",\"_rev\":\"1-0c1a526b09fb81bb58fb797785343b71\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912058.0,\"creation_date\":\"Wed Oct 22 01:20:58 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2cc08\",\"order\":[1.0,1],\"fields\":{\"long\":116.26124159999998,\"lat\":39.9118331,\"time\":1413912047.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2cc08\",\"_rev\":\"1-67bc88038f495a06e6e6bdf7d22953d3\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912047.0,\"creation_date\":\"Wed Oct 22 01:20:47 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f37761\",\"order\":[1.0,1],\"fields\":{\"long\":116.26324159999998,\"lat\":39.9018331,\"time\":1413912216.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f37761\",\"_rev\":\"1-e8951f21cc36f6f1681c42fb20653315\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912216.0,\"creation_date\":\"Wed Oct 22 01:23:36 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2fec2\",\"order\":[1.0,1],\"fields\":{\"long\":116.26824159999998,\"lat\":39.9108331,\"time\":1413912093.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2fec2\",\"_rev\":\"1-4d1aa16f5fa7261dd7270d6e9e335ba6\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912093.0,\"creation_date\":\"Wed Oct 22 01:21:33 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2defc\",\"order\":[1.0,1],\"fields\":{\"long\":116.26024159999998,\"lat\":39.9168331,\"time\":1413912066.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2defc\",\"_rev\":\"1-339509e9260b17a8494837ede2df4c4e\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912066.0,\"creation_date\":\"Wed Oct 22 01:21:06 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2bf0e\",\"order\":[1.0,1],\"fields\":{\"long\":116.26924159999998,\"lat\":39.9048331,\"time\":1413912039.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2bf0e\",\"_rev\":\"1-0657d82186c8ec1bcb38d393f91abda5\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912039.0,\"creation_date\":\"Wed Oct 22 01:20:39 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f3337f\",\"order\":[1.0,2],\"fields\":{\"long\":116.27124159999998,\"lat\":39.9138331,\"time\":1413912128.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f3337f\",\"_rev\":\"1-eff1ad50c8b5e8e72ba5a94b97331b73\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912128.0,\"creation_date\":\"Wed Oct 22 01:22:08 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f3337e\",\"order\":[1.0,2],\"fields\":{\"long\":116.27624159999998,\"lat\":39.9198331,\"time\":1413912128.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f3337e\",\"_rev\":\"1-eff1ad50c8b5e8e72ba5a94b97331b73\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912128.0,\"creation_date\":\"Wed Oct 22 01:22:08 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f3337d\",\"order\":[1.0,2],\"fields\":{\"long\":116.26924159999998,\"lat\":39.9198331,\"time\":1413912128.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f3337d\",\"_rev\":\"1-eff1ad50c8b5e8e72ba5a94b97331b73\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912128.0,\"creation_date\":\"Wed Oct 22 01:22:08 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2ee78\",\"order\":[1.0,2],\"fields\":{\"long\":116.28024159999998,\"lat\":39.9118331,\"time\":1413912070.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2ee78\",\"_rev\":\"1-5ed2707d5251449703cc6569b3874d31\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912070.0,\"creation_date\":\"Wed Oct 22 01:21:10 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}}]}";
				}else{
			result = "{\"total_rows\":36,\"bookmark\":\"g1AAAAIzeJzLYWBg4MhgTmFQSklKzi9KdUhJMtRLT81PSc3NNzAw1EvOyS9NScwr0ctLLckBqmVKZEiS____f1YGk5v9BwYwSGRBNcAYrwFJCkAyyR7dDCZUM4zwm-EAMiOegDvweyQpAWRGPUVm5LGA9DQAKaAx81HMYSbdnAUQc_bjcw_-cIGYcwBizn1K3fMAYg5q-DBnAQA3tanV\",\"rows\":[{\"id\":\"2eaa3e6e396869b589242ce4e6f2b613\",\"order\":[1.0,0],\"fields\":{\"long\":116.25424159999998,\"lat\":39.9178331,\"time\":1413912034.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2b613\",\"_rev\":\"1-586c701f9357948fce83ea00c027ae7c\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912034.0,\"creation_date\":\"Wed Oct 22 01:20:34 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2d301\",\"order\":[1.0,0],\"fields\":{\"long\":116.27424159999998,\"lat\":39.9028331,\"time\":1413912058.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2d301\",\"_rev\":\"1-0c1a526b09fb81bb58fb797785343b71\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912058.0,\"creation_date\":\"Wed Oct 22 01:20:58 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2cc08\",\"order\":[1.0,1],\"fields\":{\"long\":116.26124159999998,\"lat\":39.9118331,\"time\":1413912047.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2cc08\",\"_rev\":\"1-67bc88038f495a06e6e6bdf7d22953d3\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912047.0,\"creation_date\":\"Wed Oct 22 01:20:47 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f37761\",\"order\":[1.0,1],\"fields\":{\"long\":116.26324159999998,\"lat\":39.9018331,\"time\":1413912216.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f37761\",\"_rev\":\"1-e8951f21cc36f6f1681c42fb20653315\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912216.0,\"creation_date\":\"Wed Oct 22 01:23:36 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2fec2\",\"order\":[1.0,1],\"fields\":{\"long\":116.26824159999998,\"lat\":39.9108331,\"time\":1413912093.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2fec2\",\"_rev\":\"1-4d1aa16f5fa7261dd7270d6e9e335ba6\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912093.0,\"creation_date\":\"Wed Oct 22 01:21:33 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2defc\",\"order\":[1.0,1],\"fields\":{\"long\":116.26024159999998,\"lat\":39.9168331,\"time\":1413912066.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2defc\",\"_rev\":\"1-339509e9260b17a8494837ede2df4c4e\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912066.0,\"creation_date\":\"Wed Oct 22 01:21:06 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2bf0e\",\"order\":[1.0,1],\"fields\":{\"long\":116.26924159999998,\"lat\":39.9048331,\"time\":1413912039.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2bf0e\",\"_rev\":\"1-0657d82186c8ec1bcb38d393f91abda5\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912039.0,\"creation_date\":\"Wed Oct 22 01:20:39 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f3337f\",\"order\":[1.0,2],\"fields\":{\"long\":116.27124159999998,\"lat\":39.9138331,\"time\":1413912128.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f3337f\",\"_rev\":\"1-eff1ad50c8b5e8e72ba5a94b97331b73\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912128.0,\"creation_date\":\"Wed Oct 22 01:22:08 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f3337e\",\"order\":[1.0,2],\"fields\":{\"long\":116.27624159999998,\"lat\":39.9198331,\"time\":1413912128.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f3337e\",\"_rev\":\"1-eff1ad50c8b5e8e72ba5a94b97331b73\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912128.0,\"creation_date\":\"Wed Oct 22 01:22:08 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f3337d\",\"order\":[1.0,2],\"fields\":{\"long\":116.26924159999998,\"lat\":39.9198331,\"time\":1413912128.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f3337d\",\"_rev\":\"1-eff1ad50c8b5e8e72ba5a94b97331b73\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912128.0,\"creation_date\":\"Wed Oct 22 01:22:08 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2ee79\",\"order\":[1.0,2],\"fields\":{\"long\":116.27724159999998,\"lat\":39.9138331,\"time\":1413912070.0},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2ee79\",\"_rev\":\"1-5ed2707d5251449703cc6569b3874d31\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,39.9078331]},\"time\":1413912070.0,\"creation_date\":\"Wed Oct 22 01:21:10 UTC 2014\",\"latitude\":39.9078331,\"place\":\"N1\"}}]}";
							
		}
		return result;		
	}
	
	@RequestMapping(value="/heatmap", method = RequestMethod.GET)
	public String getHeatMap(@RequestParam(value = "id", required = false)  Long id, @RequestParam(value = "cmd", required = false) String cmd ) throws Exception {
//		String result = "{\"total_rows\":36,\"bookmark\":\"g1AAAAIzeJzLYWBg4MhgTmFQSklKzi9KdUhJMtZLT81PSc3NNzAw1EvOyS9NScwr0ctLLckBqmVKZEiS____f1YGk5v9BwYwSGRBNcAIrwFJCkAyyR7dDCaSzHAAmRFPmTsSQGbUEzDDEK8ZeSwgPQ1ACmjMfBRzmElxC8ScBRBz9pPvJ4g5ByDm3KfUPQ8g5qCGD3MWADxzqdk\",\"rows\":[{\"id\":\"2eaa3e6e396869b589242ce4e6f2b613\",\"order\":[1.0,0],\"fields\":{\"lng\":116.29684309821846,\"lat\":40.05829740538066,\"count\":30},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2b613\",\"_rev\":\"1-586c701f9357948fce83ea00c027ae7c\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,40.05329740538066]},\"time\":1413912034.0,\"creation_date\":\"Wed Oct 22 01:20:34 UTC 2014\",\"latitude\":40.05329740538066,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2d301\",\"order\":[1.0,0],\"fields\":{\"lng\":116.28684309821846,\"lat\":40.04829740538066,\"count\":90},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2d301\",\"_rev\":\"1-0c1a526b09fb81bb58fb797785343b71\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,40.05329740538066]},\"time\":1413912058.0,\"creation_date\":\"Wed Oct 22 01:20:58 UTC 2014\",\"latitude\":40.05329740538066,\"place\":\"N1\"}},{\"id\":\"2eaa3e6e396869b589242ce4e6f2d301\",\"order\":[1.0,0],\"fields\":{\"lng\":116.27684309821846,\"lat\":40.03829740538066,\"count\":20},\"doc\":{\"_id\":\"2eaa3e6e396869b589242ce4e6f2d301\",\"_rev\":\"1-0c1a526b09fb81bb58fb797785343b71\",\"longitude\":116.29184309821846,\"location\":{\"type\":\"Point\",\"coordinates\":[116.29184309821846,40.05329740538066]},\"time\":1413912058.0,\"creation_date\":\"Wed Oct 22 01:20:58 UTC 2014\",\"latitude\":40.05329740538066,\"place\":\"N1\"}}]}";
		String result = "{\"rows\":[{\"lng\":116.26914159999998,\"lat\":39.9128331,\"count\":100}, {\"lng\":116.26414159999998,\"lat\":39.9208331,\"count\":60} " +
				"]}";
		return result;		
	}
	
	//longitude:116.26924159999998 latitude:39.9178331
	//longitude:116.26024159999998 latitude:39.9028331
	//longitude:116.25424159999998 latitude:39.9118331
	//longitude:116.27424159999998 latitude:39.9018331
	//longitude:116.26124159999998 latitude:39.9108331
	//longitude:116.26224159999998 latitude:39.9048331
	//longitude:116.26324159999998 latitude:39.9168331
	//longitude:116.26824159999998 latitude:39.9158331
	//longitude:116.27024159999998 latitude:39.9148331
	//longitude:116.26524159999998 latitude:39.9138331
	//longitude:116.26424159999998 latitude:39.9128331
	//longitude:116.27124159999998 latitude:39.9118331
	//longitude:116.28024159999998 latitude:39.9078331
	
	//longitude:116.26424159999998 latitude:39.9078331
	

}
